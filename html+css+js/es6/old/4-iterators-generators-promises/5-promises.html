<!DOCTYPE HTML>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>无标题文档</title>
  <script src="../public/js/traceur.js"></script>
  <script src="../public/js/es6-module-loader-dev.js"></script>
</head>
<body>

<script>

  function doAsync() {
    let p = new Promise(function (resolve, reject) {
      console.log('in promise code');
//      setTimeout(function () {
//        console.log('resolving...');
//        resolve('ok')
//      }, 2000);
      setTimeout(function () {
        console.log('rejecting...');
        reject('db error')
      }, 2000);
    });
    return p;
  }

let promise = doAsync();
  promise.then(function (value) {
    console.log(1,value);
    return 'sure';
  }, function (reason) {
    console.log(2,reason);
    return 'not sure';
  }).then(function (value) {
    console.log(3,value);
  });

  promise.catch(function (reason) {
    console.log(4,reason);
  })

</script>

</body>
</html>
